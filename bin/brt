#!/bin/bash

# change brightness

# Arbitrary but unique message id
# change base64 string "vol" to base10 for the ID
msgId="$((64#brt))"

prv_brightness="$(printf %.0f $(xbacklight))"
new_brightness="$(($prv_brightness $@))"
echo $new_brightness
xbacklight -set $new_brightness > /dev/null

# Query amixer for the current volume and whether or not the speaker is muted
n=$(bc -l <<< "$new_brightness / 100.0")
dunstify -a "changeBrightness" -u low -i audio-volume-high -r "$msgId" \
"Brightness: ${new_brightness}%" "$(progress $n 20)"
